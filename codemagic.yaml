workflows:
  ios_build:
    name: Build iOS IPA (No Codesign)
    environment:
      flutter: stable
      xcode: latest
      cocoapods: default
    scripts:
      - name: Install dependencies
        script: |
          flutter pub get
      - name: Build iOS IPA
        script: |
          flutter build ipa --release --no-codesign
      - name: List build outputs (for debugging)
        script: |
          echo "=== List of build/ios folder ==="
          find build/ios -type f
    artifacts:
      - build/ios/ipa/*.ipa
      - build/ios/iphoneos/*.ipa
      - build/ios/iphoneos/*.app
      - build/ios/**/*.ipa
    publishing:
      email:
        recipients:
        - jonteawe@gmail.com
